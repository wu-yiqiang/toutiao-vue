{"remainingRequest":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\Project\\toutiaomobile\\src\\views\\article\\components\\comment-post.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\src\\views\\article\\components\\comment-post.vue","mtime":1615015332363},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy93aW5kb3dzL1Byb2plY3QvdG91dGlhb21vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGFkZENvbW1lbnQgfSBmcm9tICdAL2FwaS9jb21tZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb21tZW50UG9zdCcsCiAgY29tcG9uZW50czoge30sCiAgcHJvcHM6IHsKICAgIHRhcmdldDogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmcsIE9iamVjdF0sCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBpbmplY3Q6IFsnYXJ0aWNsZUlkJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1lc3NhZ2U6ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIHdhdGNoOiB7fSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIG9uUG9zdDogZnVuY3Rpb24gb25Qb3N0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3lpZWxkJGFkZENvbW1lbnQsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLiR0b2FzdC5sb2FkaW5nKHsKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+ivhOiuuuWPkeW4g+S4rS4uLicsCiAgICAgICAgICAgICAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICAgICAgICAgICAgICBEdXJhdGlvbjogMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5tZXNzYWdlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBhZGRDb21tZW50KHsKICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBfdGhpcy50YXJnZXQudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgY29udGVudDogX3RoaXMubWVzc2FnZSwKICAgICAgICAgICAgICAgICAgYXJ0X2lkOiBfdGhpcy5hcnRpY2xlSWQgPyBfdGhpcy5hcnRpY2xlSWQudG9TdHJpbmcoKSA6IG51bGwKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfeWllbGQkYWRkQ29tbWVudCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGFkZENvbW1lbnQuZGF0YTsKICAgICAgICAgICAgICAgIC8vIOWwhuWhq+WGmeeahOivhOiuuua3u+WKoOWIsOeVmeiogOS4rQogICAgICAgICAgICAgICAgX3RoaXMubWVzc2FnZSA9ICcnOwoKICAgICAgICAgICAgICAgIF90aGlzLiRlbWl0KCdjbG9zZS1wb3B1cCcsIGRhdGEuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF90aGlzLiR0b2FzdC5zdWNjZXNzKHsKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WPkeW4g+ivhOiuuuaIkOWKnyEnLAogICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CgogICAgICAgICAgICAgICAgX3RoaXMuJHRvYXN0KHsKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WPkeW4g+ivhOiuuuWksei0pScsCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCAxMl1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["comment-post.vue"],"names":[],"mappings":";;;;;;;;;;;;AAQA,SAAA,UAAA,QAAA,eAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,MAAA,EAAA,MAAA,CADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GAHA;AASA,EAAA,MAAA,EAAA,CAAA,WAAA,CATA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,OAAA,EAAA;AADA,KAAA;AAGA,GAdA;AAeA,EAAA,QAAA,EAAA,EAfA;AAgBA,EAAA,KAAA,EAAA,EAhBA;AAiBA,EAAA,OAjBA,qBAiBA,CAAA,CAjBA;AAkBA,EAAA,OAlBA,qBAkBA,CAAA,CAlBA;AAmBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AACA,kBAAA,OAAA,EAAA,UADA;AAEA,kBAAA,WAAA,EAAA,IAFA;AAGA,kBAAA,QAAA,EAAA;AAHA,iBAAA;;AADA;;AAAA,qBAOA,KAAA,CAAA,OAPA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAQA,UAAA,CAAA;AACA,kBAAA,MAAA,EAAA,KAAA,CAAA,MAAA,CAAA,QAAA,EADA;AAEA,kBAAA,OAAA,EAAA,KAAA,CAAA,OAFA;AAGA,kBAAA,MAAA,EAAA,KAAA,CAAA,SAAA,GAAA,KAAA,CAAA,SAAA,CAAA,QAAA,EAAA,GAAA;AAHA,iBAAA,CARA;;AAAA;AAAA;AAQA,gBAAA,IARA,qBAQA,IARA;AAaA;AACA,gBAAA,KAAA,CAAA,OAAA,GAAA,EAAA;;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,aAAA,EAAA,IAAA,CAAA,IAAA;;AAfA;AAiBA,gBAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AAAA,kBAAA,OAAA,EAAA,SAAA;AAAA,kBAAA,QAAA,EAAA;AAAA,iBAAA;;AAjBA;AAAA;;AAAA;AAAA;AAAA;;AAmBA,gBAAA,KAAA,CAAA,MAAA,CAAA;AAAA,kBAAA,OAAA,EAAA,QAAA;AAAA,kBAAA,QAAA,EAAA;AAAA,iBAAA;;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA;AAtBA;AAnBA,CAAA","sourcesContent":["<template>\r\n  <div class=\"comment-post\">\r\n    <van-field  class=\"post-field\"  v-model.trim=\"message\" rows=\"2\" autosize type=\"textarea\" maxlength=\"50\" placeholder=\"请输入留言\" show-word-limit/>\r\n    <van-button class=\"post-btn\" @click=\"onPost\" :disabled=\"!message.length\">发布</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addComment } from '@/api/comment'\r\nexport default {\r\n  name: 'CommentPost',\r\n  components: {},\r\n  props: {\r\n    target: {\r\n      type: [Number, String, Object],\r\n      required: true\r\n    }\r\n  },\r\n  inject: ['articleId'],\r\n  data () {\r\n    return {\r\n      message: ''\r\n    }\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created () {},\r\n  mounted () {},\r\n  methods: {\r\n    async onPost () {\r\n      this.$toast.loading({\r\n        message: '评论发布中...',\r\n        forbidClick: true,\r\n        Duration: 0\r\n      })\r\n      try {\r\n        if (this.message) {\r\n          const { data } = await addComment({\r\n            target: this.target.toString(),\r\n            content: this.message,\r\n            art_id: this.articleId ? this.articleId.toString() : null\r\n          })\r\n          // 将填写的评论添加到留言中\r\n          this.message = ''\r\n          this.$emit('close-popup', data.data)\r\n        }\r\n        this.$toast.success({ message: '发布评论成功!', duration: 500 })\r\n      } catch (error) {\r\n        this.$toast({ message: '发布评论失败', duration: 500 })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.comment-post {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 32px 0 32px 32px;\r\n  .post-field {\r\n    background-color: #f5f7f9;\r\n  }\r\n  .post-btn {\r\n    width: 150px;\r\n    border: none;\r\n    padding: 0;\r\n    color: #6ba3d8;\r\n    &::before {\r\n      display: none;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/article/components"}]}