{"remainingRequest":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\Project\\toutiaomobile\\src\\views\\article\\components\\comment-post.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\src\\views\\article\\components\\comment-post.vue","mtime":1614774796496},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvd2luZG93cy9Qcm9qZWN0L3RvdXRpYW9tb2JpbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBhZGRDb21tZW50IH0gZnJvbSAnQC9hcGkvY29tbWVudCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ29tbWVudFBvc3QnLAogIGNvbXBvbmVudHM6IHt9LAogIHByb3BzOiB7CiAgICB0YXJnZXQ6IHsKICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nLCBPYmplY3RdLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1lc3NhZ2U6ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIHdhdGNoOiB7fSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIG9uUG9zdDogZnVuY3Rpb24gb25Qb3N0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3lpZWxkJGFkZENvbW1lbnQsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLiR0b2FzdC5sb2FkaW5nKHsKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+ivhOiuuuWPkeW4g+S4rS4uLicsCiAgICAgICAgICAgICAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICAgICAgICAgICAgICBEdXJhdGlvbjogMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5tZXNzYWdlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBhZGRDb21tZW50KHsKICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBfdGhpcy50YXJnZXQsCiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IF90aGlzLm1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgIGFydF9pZDogbnVsbAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF95aWVsZCRhZGRDb21tZW50ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkYWRkQ29tbWVudC5kYXRhOwogICAgICAgICAgICAgICAgLy8g5bCG5aGr5YaZ55qE6K+E6K665re75Yqg5Yiw55WZ6KiA5LitCiAgICAgICAgICAgICAgICBfdGhpcy5tZXNzYWdlID0gJyc7CgogICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoJ2Nsb3NlLXBvcHVwJywgZGF0YS5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX3RoaXMuJHRvYXN0LnN1Y2Nlc3MoewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Y+R5biD6K+E6K665oiQ5YqfIScsCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEyOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKCiAgICAgICAgICAgICAgICBfdGhpcy4kdG9hc3QoewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Y+R5biD6K+E6K665aSx6LSlJywKICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDEyXV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["comment-post.vue"],"names":[],"mappings":";;;;;;;;;;AAQA,SAAA,UAAA,QAAA,eAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,MAAA,EAAA,MAAA,CADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GAHA;AASA,EAAA,IATA,kBASA;AACA,WAAA;AACA,MAAA,OAAA,EAAA;AADA,KAAA;AAGA,GAbA;AAcA,EAAA,QAAA,EAAA,EAdA;AAeA,EAAA,KAAA,EAAA,EAfA;AAgBA,EAAA,OAhBA,qBAgBA,CAAA,CAhBA;AAiBA,EAAA,OAjBA,qBAiBA,CAAA,CAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AACA,kBAAA,OAAA,EAAA,UADA;AAEA,kBAAA,WAAA,EAAA,IAFA;AAGA,kBAAA,QAAA,EAAA;AAHA,iBAAA;;AADA;;AAAA,qBAOA,KAAA,CAAA,OAPA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAQA,UAAA,CAAA;AACA,kBAAA,MAAA,EAAA,KAAA,CAAA,MADA;AAEA,kBAAA,OAAA,EAAA,KAAA,CAAA,OAFA;AAGA,kBAAA,MAAA,EAAA;AAHA,iBAAA,CARA;;AAAA;AAAA;AAQA,gBAAA,IARA,qBAQA,IARA;AAaA;AACA,gBAAA,KAAA,CAAA,OAAA,GAAA,EAAA;;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,aAAA,EAAA,IAAA,CAAA,IAAA;;AAfA;AAiBA,gBAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AAAA,kBAAA,OAAA,EAAA,SAAA;AAAA,kBAAA,QAAA,EAAA;AAAA,iBAAA;;AAjBA;AAAA;;AAAA;AAAA;AAAA;;AAmBA,gBAAA,KAAA,CAAA,MAAA,CAAA;AAAA,kBAAA,OAAA,EAAA,QAAA;AAAA,kBAAA,QAAA,EAAA;AAAA,iBAAA;;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA;AAtBA;AAlBA,CAAA","sourcesContent":["<template>\r\n  <div class=\"comment-post\">\r\n    <van-field  class=\"post-field\"  v-model.trim=\"message\" rows=\"2\" autosize type=\"textarea\" maxlength=\"50\" placeholder=\"请输入留言\" show-word-limit/>\r\n    <van-button class=\"post-btn\" @click=\"onPost\" :disabled=\"!message.length\">发布</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addComment } from '@/api/comment'\r\nexport default {\r\n  name: 'CommentPost',\r\n  components: {},\r\n  props: {\r\n    target: {\r\n      type: [Number, String, Object],\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      message: ''\r\n    }\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created () {},\r\n  mounted () {},\r\n  methods: {\r\n    async onPost () {\r\n      this.$toast.loading({\r\n        message: '评论发布中...',\r\n        forbidClick: true,\r\n        Duration: 0\r\n      })\r\n      try {\r\n        if (this.message) {\r\n          const { data } = await addComment({\r\n            target: this.target,\r\n            content: this.message,\r\n            art_id: null\r\n          })\r\n          // 将填写的评论添加到留言中\r\n          this.message = ''\r\n          this.$emit('close-popup', data.data)\r\n        }\r\n        this.$toast.success({ message: '发布评论成功!', duration: 500 })\r\n      } catch (error) {\r\n        this.$toast({ message: '发布评论失败', duration: 500 })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.comment-post {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 32px 0 32px 32px;\r\n  .post-field {\r\n    background-color: #f5f7f9;\r\n  }\r\n  .post-btn {\r\n    width: 150px;\r\n    border: none;\r\n    padding: 0;\r\n    color: #6ba3d8;\r\n    &::before {\r\n      display: none;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/article/components"}]}