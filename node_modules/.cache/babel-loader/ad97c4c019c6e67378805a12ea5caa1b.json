{"remainingRequest":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\Project\\toutiaomobile\\src\\views\\home\\components\\article-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\src\\views\\home\\components\\article-list.vue","mtime":1614087847820},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy93aW5kb3dzL1Byb2plY3QvdG91dGlhb21vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy93aW5kb3dzL1Byb2plY3QvdG91dGlhb21vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGdldEFydGljbGVzIH0gZnJvbSAnQC9hcGkvYWN0aWNsZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXJ0aWNsZUxpc3QnLAogIHByb3BzOiB7CiAgICBjaGFubmVsOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0OiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwKICAgICAgcmVmcmVzaGluZzogZmFsc2UsCiAgICAgIHRpbWVzdGFtcDogbnVsbCwKICAgICAgLy8g6I635Y+W5LiL5LiA6aG155qE5pWw5o2u55qE5LqL5Lu25oizCiAgICAgIGVycm9yOiBmYWxzZSAvLyDmjqfliLblpLHotKXmj5DnpLrnirbmgIEKCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3RoaXMkbGlzdCwgX3lpZWxkJGdldEFydGljbGVzLCBkYXRhLCByZXN1bHQ7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QXJ0aWNsZXMoewogICAgICAgICAgICAgICAgICBjaGFubmVsX2lkOiBfdGhpcy5jaGFubmVsLmlkLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IF90aGlzLnRpbWVzdGFtcCB8fCBEYXRlLm5vdygpLAogICAgICAgICAgICAgICAgICB3aXRoX3RvcDogMQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF95aWVsZCRnZXRBcnRpY2xlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGdldEFydGljbGVzLmRhdGE7CiAgICAgICAgICAgICAgICByZXN1bHQgPSBkYXRhLmRhdGEucmVzdWx0OwoKICAgICAgICAgICAgICAgIChfdGhpcyRsaXN0ID0gX3RoaXMubGlzdCkucHVzaC5hcHBseShfdGhpcyRsaXN0LCBfdG9Db25zdW1hYmxlQXJyYXkocmVzdWx0KSk7CgogICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnRpbWVzdGFtcCA9IGRhdGEuZGF0YS5wcmVfdGltZXN0YW1wOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuZmluaXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTFdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uUmVmcmVzaDogZnVuY3Rpb24gb25SZWZyZXNoKCkgewogICAgICAvLyDmuIXnqbrliJfooajmlbDmja4KICAgICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOyAvLyDph43mlrDliqDovb3mlbDmja4KICAgICAgLy8g5bCGIGxvYWRpbmcg6K6+572u5Li6IHRydWXvvIzooajnpLrlpITkuo7liqDovb3nirbmgIEKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMub25Mb2FkKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["article-list.vue"],"names":[],"mappings":";;;;;;;;;;;AASA,SAAA,WAAA,QAAA,eAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GAFA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,KAFA;AAGA,MAAA,QAAA,EAAA,KAHA;AAIA,MAAA,UAAA,EAAA,KAJA;AAKA,MAAA,SAAA,EAAA,IALA;AAKA;AACA,MAAA,KAAA,EAAA,KANA,CAMA;;AANA,KAAA;AAQA,GAjBA;AAkBA,EAAA,OAlBA,qBAkBA,CAAA,CAlBA;AAmBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAGA,WAAA,CAAA;AACA,kBAAA,UAAA,EAAA,KAAA,CAAA,OAAA,CAAA,EADA;AAEA,kBAAA,SAAA,EAAA,KAAA,CAAA,SAAA,IAAA,IAAA,CAAA,GAAA,EAFA;AAGA,kBAAA,QAAA,EAAA;AAHA,iBAAA,CAHA;;AAAA;AAAA;AAGA,gBAAA,IAHA,sBAGA,IAHA;AAQA,gBAAA,MARA,GAQA,IAAA,CAAA,IARA,CAQA,MARA;;AASA,8BAAA,KAAA,CAAA,IAAA,EAAA,IAAA,sCAAA,MAAA;;AACA,gBAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AACA,oBAAA,MAAA,CAAA,MAAA,EAAA;AACA,kBAAA,KAAA,CAAA,SAAA,GAAA,IAAA,CAAA,IAAA,CAAA,aAAA;AACA,iBAFA,MAEA;AACA,kBAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA;;AAfA;AAAA;;AAAA;AAAA;AAAA;AAiBA,gBAAA,KAAA,CAAA,KAAA,GAAA,IAAA;;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA,KApBA;AAqBA,IAAA,SArBA,uBAqBA;AACA;AACA,WAAA,QAAA,GAAA,KAAA,CAFA,CAIA;AACA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,MAAA;AACA;AA7BA;AAnBA,CAAA","sourcesContent":["<template>\r\n  <div class=\"article-list\">\r\n    <van-list  v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\"  :error.sync=\"error\" error-text=\"请求失败，点击重新加载\">\r\n      <van-cell v-for=\"(item,index) in list\" :key=\"index\" :title=\"item.title\" />\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getArticles } from '@/api/acticle'\r\nexport default {\r\n  name: 'ArticleList',\r\n  props: {\r\n    channel: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      list: [],\r\n      loading: false,\r\n      finished: false,\r\n      refreshing: false,\r\n      timestamp: null, // 获取下一页的数据的事件戳\r\n      error: false // 控制失败提示状态\r\n    }\r\n  },\r\n  created () {},\r\n  methods: {\r\n    async onLoad () {\r\n      /* 获取当前文章列表页面的内容 */\r\n      try {\r\n        const { data } = await getArticles({\r\n          channel_id: this.channel.id,\r\n          timestamp: this.timestamp || Date.now(),\r\n          with_top: 1\r\n        })\r\n        const { result } = data.data\r\n        this.list.push(...result)\r\n        this.loading = false\r\n        if (result.length) {\r\n          this.timestamp = data.data.pre_timestamp\r\n        } else {\r\n          this.finished = true\r\n        }\r\n      } catch (err) {\r\n        this.error = true\r\n      }\r\n    },\r\n    onRefresh () {\r\n      // 清空列表数据\r\n      this.finished = false\r\n\r\n      // 重新加载数据\r\n      // 将 loading 设置为 true，表示处于加载状态\r\n      this.loading = true\r\n      this.onLoad()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":"src/views/home/components"}]}