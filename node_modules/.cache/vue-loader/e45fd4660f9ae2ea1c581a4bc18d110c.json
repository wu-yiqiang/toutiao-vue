{"remainingRequest":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\Project\\toutiaomobile\\src\\views\\article\\components\\comment-post.vue?vue&type=style&index=0&id=805c9538&scoped=true&lang=less&","dependencies":[{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\src\\views\\article\\components\\comment-post.vue","mtime":1615015332363},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmNvbW1lbnQtcG9zdCB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogIHBhZGRpbmc6IDMycHggMCAzMnB4IDMycHg7DQogIC5wb3N0LWZpZWxkIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmN2Y5Ow0KICB9DQogIC5wb3N0LWJ0biB7DQogICAgd2lkdGg6IDE1MHB4Ow0KICAgIGJvcmRlcjogbm9uZTsNCiAgICBwYWRkaW5nOiAwOw0KICAgIGNvbG9yOiAjNmJhM2Q4Ow0KICAgICY6OmJlZm9yZSB7DQogICAgICBkaXNwbGF5OiBub25lOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["comment-post.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"comment-post.vue","sourceRoot":"src/views/article/components","sourcesContent":["<template>\r\n  <div class=\"comment-post\">\r\n    <van-field  class=\"post-field\"  v-model.trim=\"message\" rows=\"2\" autosize type=\"textarea\" maxlength=\"50\" placeholder=\"请输入留言\" show-word-limit/>\r\n    <van-button class=\"post-btn\" @click=\"onPost\" :disabled=\"!message.length\">发布</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addComment } from '@/api/comment'\r\nexport default {\r\n  name: 'CommentPost',\r\n  components: {},\r\n  props: {\r\n    target: {\r\n      type: [Number, String, Object],\r\n      required: true\r\n    }\r\n  },\r\n  inject: ['articleId'],\r\n  data () {\r\n    return {\r\n      message: ''\r\n    }\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created () {},\r\n  mounted () {},\r\n  methods: {\r\n    async onPost () {\r\n      this.$toast.loading({\r\n        message: '评论发布中...',\r\n        forbidClick: true,\r\n        Duration: 0\r\n      })\r\n      try {\r\n        if (this.message) {\r\n          const { data } = await addComment({\r\n            target: this.target.toString(),\r\n            content: this.message,\r\n            art_id: this.articleId ? this.articleId.toString() : null\r\n          })\r\n          // 将填写的评论添加到留言中\r\n          this.message = ''\r\n          this.$emit('close-popup', data.data)\r\n        }\r\n        this.$toast.success({ message: '发布评论成功!', duration: 500 })\r\n      } catch (error) {\r\n        this.$toast({ message: '发布评论失败', duration: 500 })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.comment-post {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 32px 0 32px 32px;\r\n  .post-field {\r\n    background-color: #f5f7f9;\r\n  }\r\n  .post-btn {\r\n    width: 150px;\r\n    border: none;\r\n    padding: 0;\r\n    color: #6ba3d8;\r\n    &::before {\r\n      display: none;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}