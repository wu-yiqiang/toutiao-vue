{"remainingRequest":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\Project\\toutiaomobile\\src\\views\\article\\components\\comment-post.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\src\\views\\article\\components\\comment-post.vue","mtime":1615015332363},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\toutiaomobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhZGRDb21tZW50IH0gZnJvbSAnQC9hcGkvY29tbWVudCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0NvbW1lbnRQb3N0JywNCiAgY29tcG9uZW50czoge30sDQogIHByb3BzOiB7DQogICAgdGFyZ2V0OiB7DQogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmcsIE9iamVjdF0sDQogICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgaW5qZWN0OiBbJ2FydGljbGVJZCddLA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbWVzc2FnZTogJycNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7fSwNCiAgd2F0Y2g6IHt9LA0KICBjcmVhdGVkICgpIHt9LA0KICBtb3VudGVkICgpIHt9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgb25Qb3N0ICgpIHsNCiAgICAgIHRoaXMuJHRvYXN0LmxvYWRpbmcoew0KICAgICAgICBtZXNzYWdlOiAn6K+E6K665Y+R5biD5LitLi4uJywNCiAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsDQogICAgICAgIER1cmF0aW9uOiAwDQogICAgICB9KQ0KICAgICAgdHJ5IHsNCiAgICAgICAgaWYgKHRoaXMubWVzc2FnZSkgew0KICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYWRkQ29tbWVudCh7DQogICAgICAgICAgICB0YXJnZXQ6IHRoaXMudGFyZ2V0LnRvU3RyaW5nKCksDQogICAgICAgICAgICBjb250ZW50OiB0aGlzLm1lc3NhZ2UsDQogICAgICAgICAgICBhcnRfaWQ6IHRoaXMuYXJ0aWNsZUlkID8gdGhpcy5hcnRpY2xlSWQudG9TdHJpbmcoKSA6IG51bGwNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC8vIOWwhuWhq+WGmeeahOivhOiuuua3u+WKoOWIsOeVmeiogOS4rQ0KICAgICAgICAgIHRoaXMubWVzc2FnZSA9ICcnDQogICAgICAgICAgdGhpcy4kZW1pdCgnY2xvc2UtcG9wdXAnLCBkYXRhLmRhdGEpDQogICAgICAgIH0NCiAgICAgICAgdGhpcy4kdG9hc3Quc3VjY2Vzcyh7IG1lc3NhZ2U6ICflj5HluIPor4TorrrmiJDlip8hJywgZHVyYXRpb246IDUwMCB9KQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgdGhpcy4kdG9hc3QoeyBtZXNzYWdlOiAn5Y+R5biD6K+E6K665aSx6LSlJywgZHVyYXRpb246IDUwMCB9KQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["comment-post.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"comment-post.vue","sourceRoot":"src/views/article/components","sourcesContent":["<template>\r\n  <div class=\"comment-post\">\r\n    <van-field  class=\"post-field\"  v-model.trim=\"message\" rows=\"2\" autosize type=\"textarea\" maxlength=\"50\" placeholder=\"请输入留言\" show-word-limit/>\r\n    <van-button class=\"post-btn\" @click=\"onPost\" :disabled=\"!message.length\">发布</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addComment } from '@/api/comment'\r\nexport default {\r\n  name: 'CommentPost',\r\n  components: {},\r\n  props: {\r\n    target: {\r\n      type: [Number, String, Object],\r\n      required: true\r\n    }\r\n  },\r\n  inject: ['articleId'],\r\n  data () {\r\n    return {\r\n      message: ''\r\n    }\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created () {},\r\n  mounted () {},\r\n  methods: {\r\n    async onPost () {\r\n      this.$toast.loading({\r\n        message: '评论发布中...',\r\n        forbidClick: true,\r\n        Duration: 0\r\n      })\r\n      try {\r\n        if (this.message) {\r\n          const { data } = await addComment({\r\n            target: this.target.toString(),\r\n            content: this.message,\r\n            art_id: this.articleId ? this.articleId.toString() : null\r\n          })\r\n          // 将填写的评论添加到留言中\r\n          this.message = ''\r\n          this.$emit('close-popup', data.data)\r\n        }\r\n        this.$toast.success({ message: '发布评论成功!', duration: 500 })\r\n      } catch (error) {\r\n        this.$toast({ message: '发布评论失败', duration: 500 })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.comment-post {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 32px 0 32px 32px;\r\n  .post-field {\r\n    background-color: #f5f7f9;\r\n  }\r\n  .post-btn {\r\n    width: 150px;\r\n    border: none;\r\n    padding: 0;\r\n    color: #6ba3d8;\r\n    &::before {\r\n      display: none;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}